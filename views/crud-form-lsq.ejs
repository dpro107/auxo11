<html>

<head>
   
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>



<body onload="myfn()">

    <style type="text/css">
        body {

background-color: #EAF0F6;
color: #33475B;
border: 3px solid #00A4BD;  
padding: 30px;
}
*{
box-sizing: border-box;
}

.form-row{
display: flex;
justify-content: space-between;
margin: 20px 0;
}

.form-row label {
width: 12.5%;
padding-right: 18px;
padding-left: 18px;
position: relative;
margin: 0;
}
.form-row label span {
display: block;
min-height: 40px;
font-size: 15px;
line-height: 20px;
color: #33475B;
font-weight: 500;
}
input {
width: 100%;
margin-top: 12px;
display: block;
height: 30px;
font-size: 14px;
font-weight: 500;
}

select{
width: 100%;
margin-top: 12px;
display: block;
height: 30px;
font-size: 14px;
font-weight: 500;
}
fieldset {
background-color: #eeeeee;
min-width: 160px;
width: 12.5%;
padding: 8px;
position: relative;
}
fieldset label{
width: 100% !important;
display: block;
display: flex;
align-items: center;
margin: 12px 0 0 0 !important;

}
fieldset label input{
width: 15px;
display: inline-block;
margin: 0 8px 0 0;
}
.radio-heading {
background-color: gray;
color: white;
padding: 5px 5px;
margin: 0;
position: absolute;
top: -10px;
left: 50%;
transform: translateX(-50%);
width: 140px;
text-align: center;
}
div.button-box{
  text-align: center;
  width: 100%;
}
button{
  border: 2px solid #00A4BD;
  text-align: center;
  color: #00A4BD;
  background-color: #fff;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  line-height: 20px;
  height: 32px;
  padding: 0 16px ;
}
 </style>



    <h3>SALESX Form</h3>
    <div class="crud-form">
    <form action="<%=(typeof editData!='undefined')?'/crud/update/'+editData.id:'/crud/create'%>" method="POST">
        <input type="hidden" id="b_id" name="b_id" value="<%=leng+1%>">
        <div class="form-row">
            <label><span> Program Name</span>

                <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

               
                <select id="program"  onchange="update(this.value)">
                    <option required value="<%=(typeof editData!='undefined')? editData.program:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.program:''%></option>
                    <%
                    if(fetchData.length!=0){
                    var i=1;
                    fetchData.forEach(function(data){
                       
                    %>
                    <option  value="<%= data.offer_price%>" ><%= data.name%></option>
                    <%  i++; }) %>
                    <% } else{ %>
                        <option>No data</option>
                    <% } %>

                </select>
                <input type="text" id="programme" name="program" readonly required value="<%=(typeof editData!='undefined')? editData.program:''%>" >
            </label>

            <table>
            <th> Customer Name</th>
            <td type="text" name="customer_name" readonly value="<%=(typeof editData!='undefined')? editData.customer_name:''%>"><%=fetch.first_name %></td>
            </table>
            <label><span> Phone</span>
                <input type="number" name="phone" required value="<%=(typeof editData!='undefined')? editData.phone_number:''%>">
            </label>

            <label><span> Email id</span>
                <input type="email" name="email_address" required value="<%=(typeof editData!='undefined')? editData.email_address:''%>">
            </label>
            <label><span> Counsellor</span>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

               
                <select type="text" id="counsellor" name="counsellor" >
                    <option required value="<%=(typeof editData!='undefined')? editData.counsellor:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.counsellor:''%></option>
                    <%
                    if(data_c.length!=0){


                    var i=1;
                    data_c.forEach(function(data){
                       
                    %>
                    <option  value="<%= data.name%>" ><%= data.name%></option>
                    <%  i++; }) %>
                    <% } else{ %>
                        <option>No data</option>
                    <% } %>

                </select>
            </label>

            <label><span> Enrollment Date</span>
                <input type="date" name="enrollment_dat" id="enrollment_dat" onchange="geda(this.value)"  value="<%=(typeof editData!='undefined')? editData.enrollment_date:''%>">
                <input type="text" name="enrollment_date" id="enrollment_date" required readonly value="<%=(typeof editData!='undefined' && editData.enrollment_date!=null)?  (editData.enrollment_date.getMonth()+1).toString()+'/'+editData.enrollment_date.getDate().toString()+'/'+editData.enrollment_date.getFullYear().toString():''%>">

            </label>
            <label><span style="color:red"> Customer ID</span>

                <input type="text" name="customer_id" id="customer_id"  readonly required value="<%=(typeof editData!='undefined')? editData.customer_id:''%>">
            </label>
           

                <!--<select id="Program" name="program" >
                    <option required value="<%=(typeof editData!='undefined')? editData.program:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.program:''%></option>
                    <option value="IDMA FT">IDMA FT</option>
                    <option value="Game Design">Game Design</option>
                    <option value="IDMA PT">IDMA PT</option>
                    <option value="FVR">FVR</option>
                    <option value="FSD PT">FSD PT</option>
                    <option value="FSD FT">FSD FT</option>
                    <option value="INSEAD">INSEAD</option>
                    <option value="BADS">BADS</option>
                    <option value="DDM">DDM</option>
                    <option value="DATAENG">DATAENG</option>
                    <option value="DEVOPS">DEVOPS</option>
                    <option value="IPFT FT">IPFT FT</option>
                    <option value="IPFT PT">IPFT PT</option>
                </select>-->

            <label>
                <span>
                    Batch Number
                </span>
                <input type="number" name="batch_number" id="batch_number" onchange="getcustid(this.value)" required value="<%=(typeof editData!='undefined')? editData.batch_number:''%>">
            </label>
            <fieldset>
                <span class="radio-heading">Part Time/Full Time</span>
                <label> <input type="radio" name="batch_type_s" value="Part Time" onclick="bt(this.value)" > Part Time</label>
                <label> <input type="radio" name="batch_type_s" value="Full Time" onclick="bt(this.value)"> Full Time</label>
                <input type="text" name="batch_type" id="bt_bt" required readonly value="<%=(typeof editData!='undefined')? editData.batch_type:''%>">
            </fieldset>
        </div>

        <div class="form-row">
            <label><span style="color:red"> Offer Price  Wrt Website</span>
                <input  id ="offer_price" type="float" name="offer_price" id="offer_price"  readonly required value="<%=(typeof editData!='undefined')? editData.offer_price:''%>">
            </label>
            
                

            <label><span> Discount amount</span>
                <input type="float" name="discount" id="discount"   value="<%=(typeof editData!='undefined')? editData.discount:''%>">
            </label>

          <label><span> Scholarship Amount</span>
                <input type="float" name="scholarship" id="scholarship"  required value="<%=(typeof editData!='undefined')? editData.scholarship:''%>">

                    
                </select>

            </label>
            
             <label>
                <span>
               <input type="button" value="calculate" onclick="calcprice();calcscholarship();total_self_loan_t()">
                </span>
            </label>
           
          
            <input type="float" name="due_per" id="due_per"  style="display:none"  value="<%=(typeof editData!='undefined')? editData.due:''%>" onchange="dueper(this.value)">
        
                <input type="number" name="subvention" id="subvention"  style="display:none" value="<%=(typeof editData!='undefined')? editData.subvention:''%>">
       
            
                <input type="text" name="running_batch_start_date" id="running_batch_start"  style="display:none" readonly   value="<%=(typeof editData!='undefined')? editData.running_batch_start_date:''%>">

                <input type="number" name="self_payment" id="self_payment"  style="display:none" value="<%=(typeof editData!='undefined')? editData.self_payment:''%>">

            
                 <input type="number" name="loan_payment" id="loan_payment"  style="display:none" value="<%=(typeof editData!='undefined')? editData.loan_payment:''%>">
           
                <input type="float" name="total" id="total_val" readonly style="display:none"  value="<%=(typeof editData!='undefined')? editData.total:''%>">
   

                 <input type="float" name="total_without_tax" id="total_without_tax" readonly style="display:none"   value="<%=(typeof editData!='undefined')? editData.total_without_tax:''%>">
    
      
                <input type="float" name="remaining" id="Remaining" style="display:none"  readonly value="<%=(typeof editData!='undefined')? editData.remaining:''%>">
               
                  
                    <input type="text" name="min_50_received" id="no_yes_r" style="display: none" readonly style="display:none"   value="<%=(typeof editData!='undefined')? editData.min_50_received:''%>">
    
        

                    <input type="text" name="due" id="no_yes_n" style="display: none" readonly   required value="<%=(typeof editData!='undefined')? editData.due_notdue:''%>">


            <label><span style="color:red"> **Price after scholarship and discounts**</span>
                <input type="number" name="price_after" readonly  required value="<%=(typeof editData!='undefined')? editData.price_without_tax:''%>">
            </label>



            <label><span style="color:red"> **Scholarship (%)**</span>
                <input type="number" name="scholarship_perc" id="scholarship_perc" readonly required value="<%=(typeof editData!='undefined')? editData.scholarship_per:''%>">




            </label>


            <label><span style="color:red"> **Price after scholarship and discount with tax**</span>
                <input type="number" name="price_with_tax" id="price_with_tax" readonly required value="<%=(typeof editData!='undefined')? editData.price_with_tax:''%>">
            </label>



        </div>


        <div class="form-row">

            <label><span> Payment Mode</span>
                <select id="mode" name="mode" onchange="pmode(this.value)">
                    <option required value="<%=(typeof editData!='undefined')? editData.payment_mode:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.payment_mode:''%></option>
                    <option value="Loan">Loan</option>
                    <option value="Self(Installment)">Self(Installment)</option>
                    <option value="Self(Fully Paid)">Self(Fully Paid)</option>
                </select>
            </label>

            <label><span> Loan Partner</span>
                <select id="loan" name="loan">
                    <option required value="<%=(typeof editData!='undefined')? editData.loan_partner:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.loan_partner:''%></option>
                    <%
                    if(lpp_s.length!=0){
                    var i=1;
                    lpp_s.forEach(function(data){
                       
                    %>
                    <option  value="<%= data.loan_partner%>" ><%= data.loan_partner%></option>
                    <%  i++; }) %>
                    <% } else{ %>
                        <option>No data</option>
                    <% } %>

                </select>
            </label>

            <label><span> Loan Rejected(Yes/No)</span>
                <select id="loan_rejected" name="loan_rejected"  onchange="loancase(this.value)">
                    <option required value="<%=(typeof editData!='undefined')? editData.loan_rejected:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.loan_rejected:''%></option>
                    <option value="Yes">Yes</option>
                    <option value="No" >No</option>
                </select>
            </label>


            <label><span> Loan Rejected Reason</span>
                <select id="loan_rejected_reason" name="loan_rejected_reason" style="display:none">
                        <option required value="<%=(typeof editData!='undefined')? editData.loan_rejected_reason:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.loan_rejected_reason:''%></option>
                        <%
                        if(lrr_s.length!=0){
                        var i=1;
                        lrr_s.forEach(function(data){
                           
                        %>
                        <option  value="<%= data.loan_rejected_reason%>" ><%= data.loan_rejected_reason%></option>
                        <%  i++; }) %>
                        <% } else{ %>
                            <option>No data</option>
                        <% } %>
    
                    </select>
            </label>

            <label><span> Final Disposition</span>
                <select id="Disposition" name="Disposition">
                        <option required value="<%=(typeof editData!='undefined')? editData.final_disposition:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.final_disposition:''%></option>
                        <%
                        if(fd_s.length!=0){
                        var i=1;
                        fd_s.forEach(function(data){
                           
                        %>
                        <option  value="<%= data.final_disposition%>" ><%= data.final_disposition%></option>
                        <%  i++; }) %>
                        <% } else{ %>
                            <option>No data</option>
                        <% } %>
    
                    </select>
            </label>

            <label><span> Approved Installment(In case of self payment)</span>
                <input type="number" min="0" max="6" id="approved_installment" name="approved_installment" required value="<%=(typeof editData!='undefined')? editData.approved_installment:''%>">
            </label>

            

        </div>




        <div class="form-row">

            <!-- <label><span> Subvention Amount</span>
                <input type="number" name="Subvention">
            </label> -->

            <!-- <label><span> Self Payment</span>
                <input type="number" name="self_payment">
            </label> -->

            <!-- <label>
                <span> Loan Payment Recieved</span>
                <input type="number" name="loan_payment">
            </label> -->

            <!-- <label>
                <span>
                    <input type="button" value="calculate" onclick="total_recieved();remaining();hideboth()">
                </span>
            </label> -->

            <!-- <label><span> Total Recieved (self payment+loan)</span>
                <input type="number" name="total" readonly>
            </label> -->

            <!-- 
            <label><span> Remaining Amount</span>
                <input type="number" name="Remaining" readonly>
            </label> -->



            <label><span> Curent Status</span>
                <select id="status" name="status">
                    <option required value="<%=(typeof editData!='undefined')? editData.current_status:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.current_status:''%></option>
                   
                        <%
                        if(cs_s.length!=0){
                        var i=1;
                        cs_s.forEach(function(data){
                           
                        %>
                        <option  value="<%= data.current_status%>" ><%= data.current_status%></option>
                        <%  i++; }) %>
                        <% } else{ %>
                            <option>No data</option>
                        <% } %>
    
                    </select>
            </label>




            <label><span> Remarks</span>
                <input type="text" name="Remarks" value="<%=(typeof editData!='undefined')? editData.remarks:''%>">
            </label>



            <label><span> Refund Raised(Yes/No)</span>
                <select id="refund" name="Refund_Raised" onchange="refundcase( this.value );">
                    <option required value="<%=(typeof editData!='undefined')? editData.refund:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.refund:''%></option>
                    <option value="Yes" id="refund_yes">Yes</option>
                    <option value="No" id="refund_no" >No</option>
                </select>
            </label>


            <label><span> Refund Reason</span>
                <select id="refund reason" name="Refund_Reason" style="display:none">
                    <option  value="<%=(typeof editData!='undefined')? editData.refund_reason:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.refund_reason:''%></option>
                    <label id="refund_label">
                        <%
                        if(rr_s.length!=0){
                        var i=1;
                        rr_s.forEach(function(data){
                           
                        %>
                        <option  value="<%= data.refund_reason%>" ><%= data.refund_reason%></option>
                        <%  i++; }) %>
                        <% } else{ %>
                            <option>No data</option>
                        <% } %>
                    </label>

                </select>
            </label>

            <label><span>Refund Remarks</span>
                <input type="text" name="refund_remarks" id="refund_remarks" style="display:none"  value="<%=(typeof editData!='undefined')? editData.refund_remarks:''%>">
            </label>

            <label><span>Refund Date</span>
                <input type="date" name="Refund_Dat" id="Refund_Dat" style="display:none" onchange="getrefunddate(this.value)" value="<%=(typeof editData!='undefined')? editData.refund_date:''%>">
                <input type="text" name="Refund_Date" id="Refund_Date" style="display:none" readonly value="<%=(typeof editData!='undefined' && editData.refund_date!=null)?  (editData.refund_date.getMonth()+1).toString()+'/'+editData.refund_date.getDate().toString()+'/'+editData.refund_date.getFullYear().toString():''%>">

            </label>




        </div>

        <div class="form-row">

            <label><span> Dropout(Yes/No)</span>
                <select id="Dropout" name="Dropout" onchange="dropoutcase(this.value)">
                    <option  value="<%=(typeof editData!='undefined')? editData.dropout:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.dropout:''%></option>
                    <option value="Yes">Yes</option>
                    <option value="No" >No</option>
                </select>
            </label>

            <label><span> Dropout Reason</span>
                <select id="Dropout reason" name="Dropout_reason" style="display:none">
                    <option  value="<%=(typeof editData!='undefined')? editData.dropout_reason:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.dropout_reason:''%></option>
                    <%
                    if(dr_s.length!=0){
                    var i=1;
                    dr_s.forEach(function(data){
                       
                    %>
                    <option  value="<%= data.dropout_reason%>" ><%= data.dropout_reason%></option>
                    <%  i++; }) %>
                    <% } else{ %>
                        <option>No data</option>
                    <% } %>
                </select>
            </label>

            <label><span>Dropout Date</span>
                <input type="date" name="Dropout_Dat" id="Dropout_Dat" style="display:none" onchange="getdropoutdate(this.value)" value="<%=(typeof editData!='undefined')? editData.dropout_date:''%>">
                <input type="text" name="Dropout_Date" id="Dropout_Date" style="display:none" readonly value="<%=(typeof editData!='undefined' && editData.dropout_date!=null)?  (editData.dropout_date.getMonth()+1).toString()+'/'+editData.dropout_date.getDate().toString()+'/'+editData.dropout_date.getFullYear().toString():''%>">

            </label>

            <label><span> Batch Deferred(Yes/No)</span>
                <select id="Deferred" name="Deferred"  onchange="deferredcase(this.value)">
                    <option  value="<%=(typeof editData!='undefined')? editData.batch_deferred:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.batch_deferred:''%></option>
                    <option value="Yes" >Yes</option>
                    <option value="No" >No</option>
                </select>
            </label>

            <label><span>Deferred to Next Month</span>
                <select id="nb" style="display:none"   onchange="batch_decide(this.value)">
                    <option  value="<%=(typeof editData!='undefined')? editData.deferred_to_next_batch:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.deferred_to_next_batch:''%></option>
                    <option value="Btach Not Decided" >Btach Not Decided</option>
                    
                </select>

               
                    <input type="month" id="next_batch_month" style="display: none" onchange="getmonth(this.value)" >
                    <input type="text" id="next batch" name="deferred_next_batch"  style="display: none"  value="<%=(typeof editData!='undefined')? editData.deferred_to_next_batch:''%>">
                
            </label>

            <label><span>Deferred Date (Request raised)</span>
                <input type="date"  id="Deferred_Dat" style="display: none" onchange="getdeferred_dat(this.value)"  value="<%=(typeof editData!='undefined')? editData.deferred_date:''%>">
                <input type="text" name="Deferred_Date" id="Deferred_Date" style="display: none" readonly   value="<%=(typeof editData!='undefined' && editData.deferred_date!=null)?  (editData.deferred_date.getMonth()+1).toString()+'/'+editData.deferred_date.getDate().toString()+'/'+editData.deferred_date.getFullYear().toString():''%>">


            </label>

        </div>



        <div class="form-row">

            <fieldset>
                <span class="radio-heading">Late Start(Yes/No)</span>
                <label><input type="radio" id="yes" name="late_star" value="Yes"  onclick="ShowHideDiv(this.value)" required />Yes</label>
                <label><input type="radio" id="no" name="late_star" value="No" onclick="ShowHideDiv(this.value)" />No</label>
                <input type="text" name="late_start" id="no_yes" style="display: block" readonly   required value="<%=(typeof editData!='undefined')? editData.late_start:''%>">
            </fieldset>
            <label>
                <span> Late Start(Batch Month)</span>
                <select id="dvPassport" onchange="getls(this.value)"  style="display:none" >
                    <option  value="<%=(typeof editData!='undefined')? editData.late_start_month:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.late_start_month:''%></option>
                    <option value="Batch Not Decided">Batch Not Decided</option>
                    
                </select>
                <input type="month" id="dvPassport_s" style="display:none" onchange="getm(this.value)">
                <input type="text"  name="late_start_month" id="dvPassport_st" style="display:none"    value="<%=(typeof editData!='undefined')? editData.late_start_month:''%>" >
            </label>

            <label><span> Learners enrolled for upcoming batch (Batch Launch Once a year)</span>

                <select id="upcoming batc" name="upcoming_batc" onchange="gebatch(this.value)" style="display:none">
                    <option   value="<%=(typeof editData!='undefined')? editData.upcoming_batch:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.upcoming_batch:''%></option>
                    <option value="Batch Not Decided">Batch Not Decided</option>
                    <!-- <option value="June'22">June'22</option>
                        <option value="July'22">July'22</option>
                        <option value="Aug'22">Aug'22</option>
                        <option value="Sept'22">Sept'22</option>
                        <option value="Oct'22">July'22</option>
                        <option value="Nov'22">Nov'22</option>
                        <option value="Blank">Blank</option> -->

                </select>
                <input type="month" style="display:none"  onchange="gemon(this.value)">
                <input type="text" name="upcoming_batch" id="upcoming_batch" style="display:none" value="<%=(typeof editData!='undefined')? editData.upcoming_batch_month:''%>">


            
            </label>

            <label><span>Scholarship Approved by</span>
                <select id="approved by" name="approved_by">
                    <option required value="<%=(typeof editData!='undefined')? editData.approved_by:''%>" selected="selected"><%=(typeof editData!='undefined')? editData.approved_by:''%></option>
                    <%
                    if(sab_s.length!=0){
                    var i=1;
                    sab_s.forEach(function(data){
                       
                    %>
                    <option  value="<%= data.scholarship_approved_by%>" ><%= data.scholarship_approved_by%></option>
                    <%  i++; }) %>
                    <% } else{ %>
                        <option>No data</option>
                    <% } %>
                </select>
            </label>



            <label><span> Batch Start Date</span>
                <input type="date"  name="batch_dat" onchange="getbatchd(this.value)" >
                <input type="text" name="batch_date" id="batch_date"   readonly   value="<%=(typeof editData!='undefined' && editData.batch_date!=null)?  (editData.batch_date.getMonth()+1).toString()+'/'+editData.batch_date.getDate().toString()+'/'+editData.batch_date.getFullYear().toString():''%>">

            </label>

            <label><span> Bootcamp Start Date</span>
                <input type="date" name="bootcamp_dat" onchange="getbootcampd(this.value)"  value="<%=(typeof editData!='undefined')? editData.bootcamp_date:''%>">
                <input type="text" name="bootcamp_date" id="bootcamp_date" readonly  value="<%=(typeof editData!='undefined' && editData.bootcamp_date!=null)?  (editData.bootcamp_date.getMonth()+1).toString()+'/'+editData.bootcamp_date.getDate().toString()+'/'+editData.bootcamp_date.getFullYear().toString():''%>">

            </label>
            <label><span style="color:green"> Approval Status</span>
                <input type="text" name="approval_status" id="approval_status" readonly  value="<%=(typeof editData!='undefined')? editData.approval_status:''%>">

            </label>
            <label>
                <span style="color:green">Comment By Gunjan</span>
                    <input type="text" readonly value="<%=(typeof editData!='undefined')? editData.pre_batch_comment:''%>">
            </label>
            <label><span>Comment For Approval Request</span>
                <input type="text" name="sales_pre_batch_comment" value="<%=(typeof editData!='undefined')? editData.sales_pre_batch_comment:''%>">
            </label>

            <button  onclick="approval_status.value='Pending'" id="butoning" style="display:none ;">Submit For Approval</button>



        
        </div>



        <!-- <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->

        <!-- <div class="form-row">
                Subjects: <select name="subject" id="subject">
                    <option value="" selected="selected">Select subject</option>
                </select>
                <br><br>
                Topics: <select name="topic" id="topic">
                    <option value="" selected="selected">Please select subject first</option>
                </select>
                <br><br>
                Chapters: <select name="chapter" id="chapter">
                    <option value="" selected="selected">Please select topic first</option>
                </select>
                <br><br>
                <input type="submit" value="Submit">
            </div> -->
        <div class="button-box" id="buton" style="display:none ;">

            <button id="submit" value="Submit">Submit Booking</button>
        </div>


    </form>


    <button><a href="/">Go to Home</a></button>
    <script>



function calcprice() {
    if(scholarship.value==null)
    {
        scholarship.value=0;
    }
    if(discount.value==null)
    {
        discount.value=0;
    }
    if(offer_price.value==null)
    {
        offer_price.value=0;
    }

    
  let num3 = scholarship.value;
    let num2 = discount.value;

    let num1 = offer_price.value;

  let sum = Number(num1) - Number(num2) - Number(num3);
  console.log(sum);
  let a=Number(num3)+Number(num2);
  let b=Number(num1);
  console.log(a);
  console.log(b);
  console.log(a/b);
  scholarship_perc.value=(a/b)*100;

  console.log(((Number(num3)+Number(num2))/Number(num1))*100);
  document.getElementsByName("price_after")[0].value = sum;
  price_with_tax.value=sum+0.18*sum;


  buton.style.display="block";
  butoning.style.display="block";

 
  }

function calcscholarship() {
    
    let num8 = scholarship.value;
    let num10 = discount.value;

    let num9 = offer_price.value;
    //scholarship_perc.value= ((Number(num8)+Number(num10)) / Number(num9)) * 100;
    console.log(((Number(num8)+Number(num10)) / Number(num9)) * 100);


}
function total_self_loan_t(){
   if(self_payment.value==null)
    {
        self_payment.value=0;
    }
   

    if(loan_payment.value==null)
    {
        loan_payment.value=0;
    }
    

    if(subvention.value==null)
    {
        subvention.value=0;
    }
   
    let num4 = subvention.value;
    console.log(num4);

    let num2 = loan_payment.value;

    let num1 = self_payment.value;

    let num3 = document.getElementsByName("offer_price")[0].value;

  
    let sum = Number(num1) + Number(num2) +Number(num4);
    console.log(sum);
    let sum1 = (Number(num1) + Number(num2)) / 1.18;
    let diff = Number(num3)+0.18*Number(num3) - Number(num1) - Number(num2)-Number(num4);
    let diff1=Number(price_with_tax.value)-Number(sum);
    total_val.value = sum;
    total_without_tax.value = sum1;
    Remaining.value = diff1;

    due_per.value=(Number(diff1)/Number(price_with_tax.value))*100;
    let due_perc=(Number(diff1)/Number(price_with_tax.value))*100;

    if(Number(due_perc)<=49.5)
    {
      no_yes_r.value="Approved";
      
      
      var mydate = new Date(running_batch_start.value);

      
      var q = new Date();
      var date = new Date(q.getFullYear(),q.getMonth(),q.getDate());

      if(mydate<=date)
      {
        no_yes_n.value="due";

      }
      else{
      no_yes_n.value="Not due";
      }


    }
    else{
      no_yes_r.value="Not Approved";
      no_yes_n.value="Not due";
    }
    
    

  }


function remaining() {

    let num1 = document.getElementsByName("price_with_tax")[0].value;
    let num2 = document.getElementsByName("loan_payment")[0].value;
    let num3 = document.getElementsByName("self_payment")[0].value;

    let diff = Number(num1) - Number(num2) - Number(num3);
    document.getElementsByName("Remaining")[0].value = diff;

}


function total_self_loan(){

  let num1 = document.getElementsByName("self_payment")[0].value;
  let num2 = document.getElementsByName("loan_payment")[0].value;

  let sum = Number(num1) + Number(num2);
  document.getElementsByName("totalTAX")[0].value = sum;
}

function total_self_loan_withoutTAX(){

  let num1 = document.getElementsByName("self_payment")[0].value;
  let num2 = document.getElementsByName("loan_payment")[0].value;

  let sum = (Number(num1) + Number(num2)) / 1.18;
  let sum1 = sum.toFixed(2)
  document.getElementsByName("totalwithoutTAX")[0].value = sum1;
}


function refundcase( a )
{
    if(a=="Yes")
    {
        document.getElementById( "refund reason" ).style.display = "block";
        document.getElementById( "refund_remarks" ).style.display = "block";

        document.getElementById( "Refund_Dat" ).style.display = "block";

        document.getElementById( "Refund_Date" ).style.display = "block";
    no_yes.value="No";
    Deferred.value="No";
    Dropout.value="No";
    loan_rejected.value="No";
    document.getElementById( "Dropout reason" ).style.display = "none";
  document.getElementById( "Dropout_Date" ).style.display = "none";

  document.getElementById( "Dropout_Date" ).value = " ";

  document.getElementById( "Dropout_Dat" ).style.display = "none";
  dvPassport.style.display="none";
            dvPassport_s.style.display="none";
            dvPassport_st.style.display="none";
            dvPassport.value=0;
            dvPassport_st.value="";
            no_yes.value="No";
            document.getElementById( "next batch" ).style.display = "none";
  document.getElementById( "next_batch_month" ).style.display = "none";
  document.getElementById( "nb" ).style.display = "none";
  document.getElementById( "next batch" ).value = "";


  
  document.getElementById("Deferred_Date").style.display = "none";
  document.getElementById("Deferred_Dat").style.display = "none";
  document.getElementById("Deferred_Date").value = "";
  loan_rejected_reason.style.display = "none";

  


        

       // document.getElementById( "refund reason" ).style.display = "block";

    }


 else if( a == "No" )
  {
    document.getElementById( "refund reason" ).style.display = "none";
        document.getElementById( "refund_remarks" ).style.display = "none";

        document.getElementById( "Refund_Dat" ).style.display = "none";

        document.getElementById( "Refund_Date" ).style.display = "none";

        document.getElementById( "Refund_Date" ).value = " ";

        document.getElementById( "refund_remarks" ).value = " ";


  }

}

function getrefunddate(c){
   
    document.getElementById( "Refund_Date" ).value = c;

}



function getdropoutdate(t){
   
    document.getElementById( "Dropout_Date" ).value =t;



}


function dropoutcase(b)
{
    
 if( b == "Yes" )
  {
    document.getElementById( "Dropout reason" ).style.display = "block";
    document.getElementById( "Dropout_Date" ).style.display = "block";

    document.getElementById( "Dropout_Dat" ).style.display = "block";
    no_yes.value="No";
    Deferred.value="No";
    loan_rejected.value="No";
    refund.value="No";
    dvPassport.style.display="none";
            dvPassport_s.style.display="none";
            dvPassport_st.style.display="none";
            dvPassport.value=0;
            dvPassport_st.value="";
            no_yes.value="No";
            document.getElementById( "refund reason" ).style.display = "none";
        document.getElementById( "refund_remarks" ).style.display = "none";

        document.getElementById( "Refund_Dat" ).style.display = "none";

        document.getElementById( "Refund_Date" ).style.display = "none";

        document.getElementById( "Refund_Date" ).value = " ";

        document.getElementById( "refund_remarks" ).value = " ";
        document.getElementById( "next batch" ).style.display = "none";
  document.getElementById( "next_batch_month" ).style.display = "none";
  document.getElementById( "nb" ).style.display = "none";
  document.getElementById( "next batch" ).value = "";


  
  document.getElementById("Deferred_Date").style.display = "none";
  document.getElementById("Deferred_Dat").style.display = "none";
  document.getElementById("Deferred_Date").value = "";
  loan_rejected_reason.style.display = "none";




  }
  else if(b=="No")
  {
  document.getElementById( "Dropout reason" ).style.display = "none";
  document.getElementById( "Dropout_Date" ).style.display = "none";

  document.getElementById( "Dropout_Date" ).value = " ";

  document.getElementById( "Dropout_Dat" ).style.display = "none";
  

  

  }
}


function loancase( b )
{
   loan_rejected_reason.style.display = "none";

  if( b == "Yes" )
  {
    loan_rejected_reason.style.display = "block";
    refund.value="No";
    no_yes.value="No";
    Deferred.value="No";
    Dropout.value="No";
    document.getElementById( "Dropout reason" ).style.display = "none";
  document.getElementById( "Dropout_Date" ).style.display = "none";

  document.getElementById( "Dropout_Date" ).value = " ";

  document.getElementById( "Dropout_Dat" ).style.display = "none";
  dvPassport.style.display="none";
            dvPassport_s.style.display="none";
            dvPassport_st.style.display="none";
            dvPassport.value=0;
            dvPassport_st.value="";
            no_yes.value="No";
            document.getElementById( "refund reason" ).style.display = "none";
        document.getElementById( "refund_remarks" ).style.display = "none";

        document.getElementById( "Refund_Dat" ).style.display = "none";

        document.getElementById( "Refund_Date" ).style.display = "none";

        document.getElementById( "Refund_Date" ).value = " ";

        document.getElementById( "refund_remarks" ).value = " ";
        document.getElementById( "next batch" ).style.display = "none";
  document.getElementById( "next_batch_month" ).style.display = "none";
  document.getElementById( "nb" ).style.display = "none";
  document.getElementById( "next batch" ).value = "";


  
  document.getElementById("Deferred_Date").style.display = "none";
  document.getElementById("Deferred_Dat").style.display = "none";
  document.getElementById("Deferred_Date").value = "";

   






  }
}


function deferredcase( c )
{
    if(c=="No")
    {

  document.getElementById( "next batch" ).style.display = "none";
  document.getElementById( "next_batch_month" ).style.display = "none";
  document.getElementById( "nb" ).style.display = "none";
  document.getElementById( "next batch" ).value = "";


  
  document.getElementById("Deferred_Date").style.display = "none";
  document.getElementById("Deferred_Dat").style.display = "none";
  document.getElementById("Deferred_Date").value = "";
    }

  else if(c=="Yes")
  {
  document.getElementById( "next batch" ).style.display = "block";
  document.getElementById( "next_batch_month" ).style.display = "block";
  document.getElementById( "nb" ).style.display = "block";
  
  document.getElementById("Deferred_Date").style.display = "block";
  document.getElementById("Deferred_Dat").style.display = "block";
  no_yes.value="No";
    Dropout.value="No";
    loan_rejected.value="No";
    refund.value="No";
    document.getElementById( "Dropout reason" ).style.display = "none";
  document.getElementById( "Dropout_Date" ).style.display = "none";

  document.getElementById( "Dropout_Date" ).value = " ";

  document.getElementById( "Dropout_Dat" ).style.display = "none";
  dvPassport.style.display="none";
            dvPassport_s.style.display="none";
            dvPassport_st.style.display="none";
            dvPassport.value=0;
            dvPassport_st.value="";
            no_yes.value="No";
            document.getElementById( "refund reason" ).style.display = "none";
        document.getElementById( "refund_remarks" ).style.display = "none";

        document.getElementById( "Refund_Dat" ).style.display = "none";

        document.getElementById( "Refund_Date" ).style.display = "none";

        document.getElementById( "Refund_Date" ).value = " ";

        document.getElementById( "refund_remarks" ).value = " ";
        loan_rejected_reason.style.display = "none";




  }
}



function gemon(t)
{
upcoming_batch.value=t;
}
function gebatch(t)
{
upcoming_batch.value=t;

}



  function getmonth(t){
    
 document.getElementById( "next batch" ).value = t;

}

function batch_decide(t)
{
    document.getElementById( "next batch" ).value = t;


}

function getdeferred_dat(t){
    
    document.getElementById( "Deferred_Date" ).value = t; 
}
    
function pmode( c )
{
   

  document.getElementById( "loan" ).style.visibility = "hidden";
  

    


  if( c == "Loan" )
  {
    document.getElementById( "loan" ).style.visibility = "visible";
   
   

  }
}
function ShowHideDiv(t) {
    
        if(t=="Yes")
        {
            dvPassport.style.display="block";
            dvPassport_s.style.display="block";
            dvPassport_st.style.display="block";
            no_yes.value="Yes";
    Deferred.value="No";
    Dropout.value="No";
    loan_rejected.value="No";
    refund.value="No";
    document.getElementById( "Dropout reason" ).style.display = "none";
  document.getElementById( "Dropout_Date" ).style.display = "none";

  document.getElementById( "Dropout_Date" ).value = " ";

  document.getElementById( "Dropout_Dat" ).style.display = "none";
  document.getElementById( "refund reason" ).style.display = "none";
        document.getElementById( "refund_remarks" ).style.display = "none";

        document.getElementById( "Refund_Dat" ).style.display = "none";

        document.getElementById( "Refund_Date" ).style.display = "none";

        document.getElementById( "Refund_Date" ).value = " ";

        document.getElementById( "refund_remarks" ).value = " ";
        document.getElementById( "next batch" ).style.display = "none";
  document.getElementById( "next_batch_month" ).style.display = "none";
  document.getElementById( "nb" ).style.display = "none";
  document.getElementById( "next batch" ).value = "";


  
  document.getElementById("Deferred_Date").style.display = "none";
  document.getElementById("Deferred_Dat").style.display = "none";
  document.getElementById("Deferred_Date").value = "";
  loan_rejected_reason.style.display = "none";



        }
        else if(t=="No")
        {
            dvPassport.style.display="none";
            dvPassport_s.style.display="none";
            dvPassport_st.style.display="none";
            dvPassport.value=0;
            dvPassport_st.value="";
            no_yes.value="No";


        }

   

    }


    function myfn()
    {

        if(customer_name.value.length==0)
        {    
            customer_name.value= <%=fetch.first_name %>;
        }

        if(discount.value.length==0)
        {
            discount.value=0;
        }
        if(scholarship.value.length==0)
        {
            scholarship.value=0;
        }

        if(Deferred.value=="")
        {
            Deferred.value="No";
        }
        if(Dropout.value=="")
        {
            Dropout.value="No";
        }
        if(refund.value=="")
        {
            refund.value="No";
        }
        if(loan_rejected.value=="")
        {
            loan_rejected.value="No";

        }
        if(no_yes.value=="")
        {
            no_yes.value="No";
        }
        if(approved_installment.value.length==0)
        {
            approved_installment.value=0;
        }
        if(refund_yes.value=="Yes")
        {
            document.getElementById( "refund reason" ).style.display = "block";
            refund_remarks.style.display="block";
            Refund_Dat.style.display="block";
            Refund_Date.style.display="block";



        }
        if(loan_rejected.value=="Yes")
        {
            loan_rejected_reason.style.display="block";   
        }
        if(Dropout.value=="Yes")
    {
        document.getElementById( "Dropout reason" ).style.display = "block";
        Dropout_Dat.style.display="block";
        Dropout_Date.style.display="block";


    }
    if(Deferred.value=="Yes")
    {
        Deferred_Dat.style.display="block";
        Deferred_Date.style.display="block";
        next_batch_month.style.display="block";
        nb.value="block";
        document.getElementById( "next batch" ).style.display = "block";

    }
    if(no_yes.value=="Yes")
        {
            dvPassport.style,display="block";
            dvPassport_s.style,display="block";
            dvPassport_st.style,display="block";

        }
        if(self_payment.value.length==0)
    {
        self_payment.value=0;
    }
   

    if(loan_payment.value.length==0)
    {
        loan_payment.value=0;
    }
    

    if(subvention.value.length==0)
    {
        subvention.value=0;
    }



        

        
    }

    function bt(t)
    {
        bt_bt.value=t;

    }

    function getcustid(b){
        var x = document.getElementById("enrollment_dat").value;
         var dateObj = new Date(x);
         var year = dateObj.getFullYear();

         if(customer_id.value=="")
         {
        
        customer_id.value=programme.value+"B"+b+"-"+year +"-"+b_id.value;
         }
        


    }

    function geda(t)
    {
        enrollment_date.value=t;
    }


    function getls(b)
    {
        dvPassport_st.value=b;
    }

    function getm(b)
    {
        dvPassport_st.value=b;
    }

function update(t) {
				var select = document.getElementById('program');
				var option = select.options[select.selectedIndex];

				offer_price.value = t;
				document.getElementById('programme').value = option.text;
               
			}

			

function getbatchd(t)
{
   
    batch_date.value=t;
}
function getbootcampd(t)
{
    bootcamp_date.value=t;
}
        


    








    </script>



</body>

</html>